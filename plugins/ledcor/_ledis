#compdef ledis

# echo "${CURRENT}" "${words[CURRENT-1]}" "${BUFFER}"

local -a _ledis_commands
local -a _ledis_rest

_commands=(
  help
  ad
  package
  bundledeps
  csv
  dev-server
  extract-mcs-package
  format-json-for-boomi
  generate-api
  http-proxy
  http-sink
  json-schema-bundle
  mcs-download-certs
  mcs-list-impls
  mcs-logs
  mcs-register-db
  mcs-trash-impls
  mcs-upload-impl
  mcs-upload-raml
  mcs-users
  mock-api
  msal-token
  odata-to-swagger
  omh-download-certs
  omh-policies
  omh-register-db
  omh-upload-impl
  omh-upload-raml
  package
  postman-env
  raml-flatten
  swagger-to-dts
)

_subcommands_omh_policies=(
  set-auth-token-config
)

_ledis_commands() {
  _describe -t commands "ledis command" _commands
}

_ledis_subcommands() {
  case ${line[1]} in
    omh-policies)
      _describe -t commands "ledis omh-policies subcommand" _subcommands_omh_policies ;;
    *)
      _files
  esac
}
_ledis_rest() {
  # TODO: cache results
  compadd -- `ledis --compzsh --compgen "${CURRENT}" "${words[CURRENT-1]}" "${BUFFER}"`
}
_arguments -C \
  '1:command:_ledis_commands' \
  '2: :_ledis_subcommands' \
  '*: :_files' && ret=0


return $ret